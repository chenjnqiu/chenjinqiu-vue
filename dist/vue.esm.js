var activeEffect;function effect(e){function t(){cleanup(t),activeEffect=t,e()}t.deps=[],t()}!function(e,t){e&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(self.document);var data={foo:!0,bar:!0},bucket=new WeakMap,obj=new Proxy(data,{get:function(e,t){return track(e,t),e[t]},set:function(e,t,n){e[t]=n,trigger(e,t)}});function track(e,t){if(!activeEffect)return e[t];var n=bucket.get(e),e=(n||bucket.set(e,n=new Map),n.get(t));e||n.set(t,e=new Set),e.add(activeEffect),activeEffect.deps.push(e)}function trigger(e,t){var e=bucket.get(e);e&&(e=e.get(t),new Set(e).forEach(function(e){return e()}))}function cleanup(e){for(var t=0;t<e.deps.length;t++)e.deps[t].delete(e);e.deps.length=0}effect(function(){console.log("effectFn1 执行"),effect(function(){console.log("effectFn2 执行"),obj.bar}),obj.foo}),setTimeout(function(){obj.bar=!1},2e3);
//# sourceMappingURL=vue.esm.js.map
